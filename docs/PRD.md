# VS Code Git 变更上传插件产品需求文档

## 1. 产品概述

项目名：changes-uploader
开发一款VS Code侧边栏插件，用于管理Git仓库中已修改文件的上传与跟踪，提供便捷的文件上传功能，并保持对修改文件的持续跟踪，直到文件被提交或手动移除。

## 2. 功能需求

### 2.1 侧边栏文件列表展示
- 插件侧边栏需展示Git仓库中所有修改过的文件名称列表（鼠标移入显示完整路径）
- 列表中的文件项不可因文件实际存在状态变化而消失，仅在满足移除条件时才会被移除
- 文件名列表应包含以下类型文件：
  - 已暂存文件（Git Staged Files）
  - 未暂存文件（Git Unstaged Files）
  - 新增文件（Git Untracked Files）
- 每当触发git修改事件后，自动将对应文件名加入到列表中进行跟踪

### 2.2 文件上传功能
- 列表中每个文件名旁需配备独立的"上传"按钮
- 点击"上传"按钮后，可将对应文件按其在本地仓库的目录结构直接覆盖上传至远程服务器
- 侧边栏顶部需设置"全部上传"按钮
- 点击"全部上传"按钮后，可将列表中所有文件按其对应目录结构批量覆盖上传至远程服务器

### 2.3 文件移除功能
- 列表中每个文件名旁需配备独立的"永久移除"按钮
- 文件项在未被永久移除前需持续保留在列表中，不受文件状态变化影响

### 2.4 自动移除机制
- 当执行Git Commit操作后，系统需自动检测提交的文件列表
- 若提交的文件列表包含插件当前跟踪的文件名列表中的文件，需将这些文件从插件列表中自动移除

### 2.5 远程服务器配置
- 提供VS Code图形化配置界面（非通过setting.json文件手动配置）
- 用于配置远程服务器连接信息
- 远程服务器的配置方式仅限SSH Config一种
- 配置信息应包括：
  - SSH Config 文件地址
  - 远程服务器host
  - 远程服务器上传文件根目录路径

### 2.6 日志需求
- 插件运行过程的日志，要在vscode输出窗口中显示，并且能切换到只有changes-uploader的日志输出

## 3. 用户界面需求

### 3.1 侧边栏面板
- 顶部区域：包含"全部上传"按钮
- 中部区域：展示修改文件列表，每项包含：
  - 文件名（鼠标移入显示完整路径）
  - "上传"按钮
  - "永久移除"按钮

### 3.2 配置界面
- 通过VS Code的设置界面访问插件配置
- 提供表单式的配置项输入界面
- 配置项支持保存功能

### 3.3 插件图标
- 统一使用vscode官方插件库，使用$(icon)格式引入

## 4. 技术需求

### 4.1 集成Git功能
- 插件需与Git进行深度集成，能够监听Git事件
- 能够获取Git仓库的状态信息，包括已修改、已暂存和新增的文件

### 4.2 SSH连接管理
- 支持SSH Config方式连接远程服务器

### 4.3 文件传输
- 实现基于SSH的文件传输功能（SFTP）
- 保持本地文件目录结构上传到远程服务器

### 4.4 持久化存储
- 保存跟踪文件列表状态，确保VS Code重启后仍能恢复

## 5. 兼容性要求

- 支持Windows、macOS操作系统
- 兼容主流版本的VS Code（建议支持最近三个主要版本）
- 支持主流的Git版本（建议支持2.0及以上版本）

## 6. 性能要求

- 文件列表更新应实时响应Git操作
- 文件上传操作应具有良好的速度和稳定性
- 插件启动和运行时不应显著影响VS Code的性能

## 7. 安全性要求

- 文件传输应通过安全的SSH协议进行